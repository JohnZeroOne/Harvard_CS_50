for (iterate over scan lines)
    for (iterate n times for vertical re-size)
        for (iterate over pixels in scanline)
            fread(rgbtriple, old_image)
            for (iterate n times for horizontal re-size)
                fwrite(rgbtriple, new_image)
        fseek(skip old padding)
        for(new padding)
            fwrite(new padding)
        if (loop hasn't been performed n-1 times yet)
            fseek(go back to start of scan line)